{"version":3,"sources":["../libs/sdk.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;sBASc,QAAQ;;;;kCACc,WAAW;;;;;;;;;;IAS1B,GAAG;AACX,WADQ,GAAG,CACV,IAAI,EAAE,MAAM,EAAgB;QAAd,KAAK,gCAAG,IAAI;;0BADnB,GAAG;;AAEpB,QAAI,CAAC,MAAM,IAAI,CAAC,IAAI;AAClB,aAAM;KAAA,AACR,IAAI,CAAC,oBAAE,QAAQ,CAAC,MAAM,CAAC;AACrB,aAAM;KAAA,AAER,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;AAChB,QAAI,CAAC,MAAM,GAAG,MAAM,CAAA;AACpB,QAAI,CAAC,KAAK,GAAG,KAAK,CAAA;;AAElB,QAAI,IAAI,CAAC,KAAK,EACZ,IAAI,CAAC,IAAI,EAAE,CAAA;GACd;;eAbkB,GAAG;;;;;;;;;;;WAuBlB,cAAC,GAAG,EAAE,KAAK,EAAE;AACf,UAAI,CAAC,GAAG,IAAI,CAAC,KAAK;AAChB,eAAO,KAAK,CAAA;OAAA,AACd,IAAI,CAAC,IAAI,CAAC,KAAK,EACb,IAAI,CAAC,KAAK,GAAG,EAAE,CAAA;;AAEjB,UAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,GAAG,KAAK,CAAA;AACrC,aAAO,IAAI,CAAA;KACZ;;;;;;;;;;;WASG,gBAAG;;;AACL,UAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;AACtB,UAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;AACxB,UAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;;AAG3B,OAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAA,MAAM;eAC7C,MAAK,MAAM,CAAC,GAAG,oBAxDZ,QAAQ,CAwDa,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC;OAAA,CAAC,CAAA;;;AAG/C,YAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG,EAAI;AACjC,YAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;AACvB,YAAI,GAAG,GAAG;AACR,aAAG,EAAE,OAAO,KAAK,AAAC,KAAK,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC,GAAG;SACpD,CAEA,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,OAAO,CAAC,UAAA,IAAI,EAAI;AACtC,cAAI,KAAK,CAAC,IAAI,CAAC,EACb,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;SAC1B,CAAC,CAAA;;AAEF,cAAK,GAAG,CAAC,GAAG,oBAtEC,SAAS,CAsEA,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAA;OACxC,CAAC,CAAA;;AAEF,aAAO,IAAI,CAAA;KACZ;;;SAjEkB,GAAG;;;qBAAH,GAAG","file":"libs/sdk.js","sourcesContent":["//              ____\n//    _________/ / /__\n//   / ___/ __  / //_/\n//  (__  ) /_/ / ,<\n// /____/\\__,_/_/|_|\n//\n// @brief: a sdk factory, build sdks made easy\n// @author: [turingou](http://guoyu.me)\n\nimport _ from 'lodash'\nimport { lowLevel, highLevel } from './factory'\n\n/**\n *\n * @host[String]: the host domain\n * @routes[Object]: a object contains every route of the sdk, including its URL, method, and callback function\n * @rules[Object]: a object contains rules which append or merged into query params.\n *\n **/\nexport default class SDK {\n  constructor(host, routes, rules = null) {\n    if (!routes || !host) \n      return\n    if (!_.isObject(routes)) \n      return\n\n    this.host = host\n    this.routes = routes\n    this.rules = rules\n\n    if (this.rules) \n      this.init()\n  }\n  \n  /**\n   *\n   * Add a new rule to SDK instance\n   * @key[String]: the key word of this rule, may be `get`,`post` or `all`\n   * @value[Object]: the value of this rule, this very object will be merged in to query params,\n   * for instance, `qs` object will be merged into query string. and `form` object will be merged into post form.\n   *\n   **/\n  rule(key, value) {\n    if (!key || !value) \n      return false\n    if (!this.rules) \n      this.rules = {}\n\n    this.rules[key.toLowerCase()] = value\n    return this\n  }\n\n  /**\n   *\n   * Init a SDK instance\n   * if there's no any available rules provied before ,\n   * this init function can be triggered by users and at any time they want.\n   *\n   **/\n  init() {\n    const host = this.host\n    const rules = this.rules\n    const routes = this.routes;\n\n    // init build-in lowlevel apis\n    ['get', 'post', 'put', 'delete'].forEach(method =>\n      this[method] = lowLevel(host, method, rules))\n\n    // init custom apis\n    Object.keys(routes).forEach(key => {\n      let route = routes[key]\n      let api = {\n        url: typeof(route) === 'string' ? route : route.url\n      }\n\n      ;['method', 'callback'].forEach(item => {\n        if (route[item])\n          api[item] = route[item]\n      })\n\n      this[key] = highLevel(host, api, rules)\n    })\n\n    return this\n  }\n}\n"]}